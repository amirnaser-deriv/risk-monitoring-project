2025-02-05 15:34:48,249:INFO - Initial state:
2025-02-05 15:34:48,250:INFO - Gold price: $1900.00
2025-02-05 15:34:48,250:INFO - Silver price: $30.00
2025-02-05 15:34:48,250:INFO - RSI_Gold_mtm: 1.5789 gold @ $1900.00 + $7000.00 cash = $10000.00
2025-02-05 15:34:48,250:INFO - RSI_Gold_ctn: 1.5789 gold @ $1900.00 + $7000.00 cash = $10000.00
2025-02-05 15:34:48,250:INFO - RSI_Silver_mtm: 100.0000 silver @ $30.00 + $7000.00 cash = $10000.00
2025-02-05 15:34:48,250:INFO - RSI_Silver_ctn: 100.0000 silver @ $30.00 + $7000.00 cash = $10000.00
2025-02-05 15:34:49,241:INFO - Successfully connected to Supabase
2025-02-05 15:34:49,826:INFO - Cleared existing indices
2025-02-05 15:34:51,215:INFO - Initialized indices table with Gold, Silver, RSI_Gold_mtm, RSI_Gold_ctn, RSI_Silver_mtm, RSI_Silver_ctn
2025-02-05 15:34:51,215:INFO - Starting feed engine aggregator with metal prices and RSI portfolios...
2025-02-05 15:34:51,404:INFO - Updated Gold => 1901.39
2025-02-05 15:34:51,670:INFO - Updated Silver => 29.98
2025-02-05 15:34:51,875:INFO - Updated RSI_Gold_mtm => 10002.19
2025-02-05 15:34:52,074:INFO - Updated RSI_Gold_ctn => 10002.19
2025-02-05 15:34:52,322:INFO - Updated RSI_Silver_mtm => 9997.95
2025-02-05 15:34:52,515:INFO - Updated RSI_Silver_ctn => 9997.95
2025-02-05 15:34:52,520:INFO - server listening on [::1]:8765
2025-02-05 15:34:52,520:INFO - server listening on 127.0.0.1:8765
2025-02-05 15:34:52,520:INFO - WebSocket server running on ws://localhost:8765
2025-02-05 15:34:52,520:INFO - Press Ctrl+C to stop
2025-02-05 15:34:52,697:INFO - Updated Gold => 1902.56
2025-02-05 15:34:52,983:INFO - Updated Silver => 30.07
2025-02-05 15:34:53,164:INFO - Updated RSI_Gold_mtm => 10004.04
2025-02-05 15:34:53,364:INFO - Updated RSI_Gold_ctn => 10004.04
2025-02-05 15:34:53,560:INFO - Updated RSI_Silver_mtm => 10007.04
2025-02-05 15:34:53,966:INFO - Updated RSI_Silver_ctn => 10007.04
2025-02-05 15:34:53,968:INFO - connection open
2025-02-05 15:34:53,968:INFO - Client connected. Total clients: 1
2025-02-05 15:34:53,969:INFO - Sent initial price snapshot to client
2025-02-05 15:34:53,969:INFO - Sent initial positions snapshot to client
2025-02-05 15:34:55,283:INFO - Updated Gold => 1900.62
2025-02-05 15:34:55,480:INFO - Updated Silver => 30.01
2025-02-05 15:34:55,681:INFO - Updated RSI_Gold_mtm => 10000.99
2025-02-05 15:34:55,868:INFO - Updated RSI_Gold_ctn => 10000.99
2025-02-05 15:34:56,227:INFO - Updated RSI_Silver_mtm => 10000.73
2025-02-05 15:34:56,424:INFO - Updated RSI_Silver_ctn => 10000.73
2025-02-05 15:34:57,629:INFO - Updated Gold => 1899.27
2025-02-05 15:34:57,829:INFO - Updated Silver => 30.07
2025-02-05 15:34:58,116:INFO - Updated RSI_Gold_mtm => 9998.85
2025-02-05 15:34:58,315:INFO - Updated RSI_Gold_ctn => 9998.85
2025-02-05 15:34:58,573:INFO - Updated RSI_Silver_mtm => 10007.05
2025-02-05 15:34:59,097:INFO - Updated RSI_Silver_ctn => 10007.05
2025-02-05 15:35:00,641:INFO - Updated Gold => 1900.80
2025-02-05 15:35:01,135:INFO - Updated Silver => 30.11
2025-02-05 15:35:01,572:INFO - Updated RSI_Gold_mtm => 10001.27
2025-02-05 15:35:01,814:INFO - Updated RSI_Gold_ctn => 10001.27
2025-02-05 15:35:02,030:INFO - Updated RSI_Silver_mtm => 10010.53
2025-02-05 15:35:02,359:INFO - Updated RSI_Silver_ctn => 10010.53
2025-02-05 15:35:03,560:INFO - Updated Gold => 1901.08
2025-02-05 15:35:03,773:INFO - Updated Silver => 30.17
2025-02-05 15:35:03,997:INFO - Updated RSI_Gold_mtm => 10001.71
2025-02-05 15:35:04,224:INFO - Updated RSI_Gold_ctn => 10001.71
2025-02-05 15:35:04,645:INFO - Updated RSI_Silver_mtm => 10016.55
2025-02-05 15:35:05,120:INFO - Updated RSI_Silver_ctn => 10016.55
2025-02-05 15:35:06,328:INFO - Updated Gold => 1902.57
2025-02-05 15:35:06,632:INFO - Updated Silver => 30.11
2025-02-05 15:35:07,764:INFO - Updated RSI_Gold_mtm => 10004.06
2025-02-05 15:35:08,076:INFO - Updated RSI_Gold_ctn => 10004.06
2025-02-05 15:35:08,650:INFO - Updated RSI_Silver_mtm => 10010.67
2025-02-05 15:35:08,842:INFO - Updated RSI_Silver_ctn => 10010.67
2025-02-05 15:35:10,571:INFO - Updated Gold => 1901.40
2025-02-05 15:35:11,013:INFO - Updated Silver => 30.03
2025-02-05 15:35:11,183:INFO - Updated RSI_Gold_mtm => 10002.21
2025-02-05 15:35:11,748:INFO - Updated RSI_Gold_ctn => 10002.21
2025-02-05 15:35:13,091:INFO - Updated RSI_Silver_mtm => 10002.54
2025-02-05 15:35:13,589:INFO - Updated RSI_Silver_ctn => 10002.54
2025-02-05 15:35:18,041:INFO - Updated Gold => 1901.41
2025-02-05 15:35:18,272:INFO - Updated Silver => 30.07
2025-02-05 15:35:18,473:INFO - Updated RSI_Gold_mtm => 10002.23
2025-02-05 15:35:18,648:INFO - Updated RSI_Gold_ctn => 10002.23
2025-02-05 15:35:18,858:INFO - Updated RSI_Silver_mtm => 10006.92
2025-02-05 15:35:19,112:INFO - Updated RSI_Silver_ctn => 10006.92
2025-02-05 15:35:20,378:INFO - Updated Gold => 1902.91
2025-02-05 15:35:20,583:INFO - Updated Silver => 30.15
2025-02-05 15:35:20,986:INFO - Updated RSI_Gold_mtm => 10004.59
2025-02-05 15:35:21,208:INFO - Updated RSI_Gold_ctn => 10004.59
2025-02-05 15:35:21,402:INFO - Updated RSI_Silver_mtm => 10015.11
2025-02-05 15:35:21,612:INFO - Updated RSI_Silver_ctn => 10015.11
2025-02-05 15:35:22,881:INFO - Updated Gold => 1904.71
2025-02-05 15:35:23,075:INFO - Updated Silver => 30.12
2025-02-05 15:35:23,264:INFO - Updated RSI_Gold_mtm => 10007.44
2025-02-05 15:35:23,448:INFO - Updated RSI_Gold_ctn => 10007.44
2025-02-05 15:35:23,626:INFO - Updated RSI_Silver_mtm => 10011.58
2025-02-05 15:35:23,875:INFO - Updated RSI_Silver_ctn => 10011.58
2025-02-05 15:35:25,080:INFO - Updated Gold => 1906.68
2025-02-05 15:35:25,291:INFO - Updated Silver => 30.05
2025-02-05 15:35:25,475:INFO - Updated RSI_Gold_mtm => 10010.55
2025-02-05 15:35:25,685:INFO - Updated RSI_Gold_ctn => 10010.55
2025-02-05 15:35:25,865:INFO - Updated RSI_Silver_mtm => 10005.02
2025-02-05 15:35:25,866:INFO - Removed dead client. Total clients: 0
2025-02-05 15:35:26,047:INFO - Updated RSI_Silver_ctn => 10005.02
2025-02-05 15:35:26,048:ERROR - connection handler failed
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/server.py", line 236, in handler
    await self.ws_handler(self)
  File "/Users/matthewchan/Documents/Repos/risk-monitoring-project/feed-engine.py", line 230, in register_client
    connected_clients.remove(websocket)
KeyError: <websockets.legacy.server.WebSocketServerProtocol object at 0x10593bc20>
2025-02-05 15:35:26,052:INFO - connection closed
2025-02-05 15:35:26,052:INFO - connection open
2025-02-05 15:35:26,052:INFO - Client connected. Total clients: 1
2025-02-05 15:35:26,052:INFO - Sent initial price snapshot to client
2025-02-05 15:35:26,052:INFO - Sent initial positions snapshot to client
2025-02-05 15:35:27,271:INFO - Updated Gold => 1905.96
2025-02-05 15:35:27,443:INFO - Updated Silver => 30.07
2025-02-05 15:35:27,623:INFO - Updated RSI_Gold_mtm => 10009.41
2025-02-05 15:35:27,808:INFO - Updated RSI_Gold_ctn => 10009.41
2025-02-05 15:35:27,987:INFO - Updated RSI_Silver_mtm => 10007.15
2025-02-05 15:35:28,327:INFO - Updated RSI_Silver_ctn => 10007.15
2025-02-05 15:35:29,822:INFO - Updated Gold => 1906.96
2025-02-05 15:35:30,148:INFO - Updated Silver => 30.03
2025-02-05 15:35:30,699:INFO - Updated RSI_Gold_mtm => 10010.99
2025-02-05 15:35:30,946:INFO - Updated RSI_Gold_ctn => 10010.99
2025-02-05 15:35:31,351:INFO - Updated RSI_Silver_mtm => 10003.45
2025-02-05 15:35:31,543:INFO - Updated RSI_Silver_ctn => 10003.45
2025-02-05 15:35:33,007:INFO - Updated Gold => 1908.51
2025-02-05 15:35:33,227:INFO - Updated Silver => 30.00
2025-02-05 15:35:34,530:INFO - Updated RSI_Gold_mtm => 10013.44
2025-02-05 15:35:34,721:INFO - Updated RSI_Gold_ctn => 10013.44
2025-02-05 15:35:34,929:INFO - Updated RSI_Silver_mtm => 9999.75
2025-02-05 15:35:35,134:INFO - Updated RSI_Silver_ctn => 9999.75
2025-02-05 15:35:36,317:INFO - Updated Gold => 1907.56
2025-02-05 15:35:36,505:INFO - Updated Silver => 30.06
2025-02-05 15:35:36,686:INFO - Updated RSI_Gold_mtm => 10011.94
2025-02-05 15:35:36,858:INFO - Updated RSI_Gold_ctn => 10011.94
2025-02-05 15:35:37,029:INFO - Updated RSI_Silver_mtm => 10006.28
2025-02-05 15:35:37,204:INFO - Updated RSI_Silver_ctn => 10006.28
2025-02-05 15:35:38,621:INFO - Updated Gold => 1907.98
2025-02-05 15:35:38,778:INFO - Updated Silver => 30.12
2025-02-05 15:35:38,962:INFO - Updated RSI_Gold_mtm => 10012.60
2025-02-05 15:35:39,167:INFO - Updated RSI_Gold_ctn => 10012.60
2025-02-05 15:35:39,330:INFO - Updated RSI_Silver_mtm => 10011.55
2025-02-05 15:35:39,507:INFO - Updated RSI_Silver_ctn => 10011.55
2025-02-05 15:35:40,941:INFO - Updated Gold => 1908.43
2025-02-05 15:35:41,182:INFO - Updated Silver => 30.10
2025-02-05 15:35:41,461:INFO - Updated RSI_Gold_mtm => 10013.32
2025-02-05 15:35:41,699:INFO - Updated RSI_Gold_ctn => 10013.32
2025-02-05 15:35:41,947:INFO - Updated RSI_Silver_mtm => 10010.01
2025-02-05 15:35:42,273:INFO - Updated RSI_Silver_ctn => 10010.01
2025-02-05 15:35:43,632:INFO - Updated Gold => 1908.09
2025-02-05 15:35:43,883:INFO - Updated Silver => 30.19
2025-02-05 15:35:44,058:INFO - Updated RSI_Gold_mtm => 10012.77
2025-02-05 15:35:44,058:INFO - Removed dead client. Total clients: 0
2025-02-05 15:35:44,253:INFO - Updated RSI_Gold_ctn => 10012.77
2025-02-05 15:35:44,761:INFO - Updated RSI_Silver_mtm => 10019.35
2025-02-05 15:35:44,891:INFO - Updated RSI_Silver_ctn => 10019.35
2025-02-05 15:35:44,891:ERROR - connection handler failed
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/server.py", line 236, in handler
    await self.ws_handler(self)
  File "/Users/matthewchan/Documents/Repos/risk-monitoring-project/feed-engine.py", line 230, in register_client
    connected_clients.remove(websocket)
KeyError: <websockets.legacy.server.WebSocketServerProtocol object at 0x10599f0e0>
2025-02-05 15:35:44,892:INFO - connection closed
2025-02-05 15:35:44,893:INFO - connection open
2025-02-05 15:35:44,893:INFO - Client connected. Total clients: 1
2025-02-05 15:35:44,893:INFO - Sent initial price snapshot to client
2025-02-05 15:35:44,894:INFO - Sent initial positions snapshot to client
2025-02-05 15:35:46,439:INFO - Updated Gold => 1908.23
2025-02-05 15:35:48,403:INFO - Updated Silver => 30.24
2025-02-05 15:35:48,567:INFO - Updated RSI_Gold_mtm => 10012.99
2025-02-05 15:35:48,781:INFO - Updated RSI_Gold_ctn => 10012.99
2025-02-05 15:35:49,311:INFO - Updated RSI_Silver_mtm => 10023.62
2025-02-05 15:35:49,712:INFO - Updated RSI_Silver_ctn => 10023.62
2025-02-05 15:35:51,325:INFO - Updated Gold => 1908.87
2025-02-05 15:35:51,590:INFO - Updated Silver => 30.17
2025-02-05 15:35:51,788:INFO - Updated RSI_Gold_mtm => 10014.00
2025-02-05 15:35:51,980:INFO - Updated RSI_Gold_ctn => 10014.00
2025-02-05 15:35:52,534:INFO - Updated RSI_Silver_mtm => 10017.26
2025-02-05 15:35:52,710:INFO - Updated RSI_Silver_ctn => 10017.26
2025-02-05 15:35:53,880:INFO - Updated Gold => 1909.64
2025-02-05 15:35:55,076:INFO - Updated Silver => 30.22
2025-02-05 15:35:55,287:INFO - Updated RSI_Gold_mtm => 10015.22
2025-02-05 15:35:55,582:INFO - Updated RSI_Gold_ctn => 10015.22
2025-02-05 15:35:55,799:INFO - Updated RSI_Silver_mtm => 10022.39
2025-02-05 15:35:55,984:INFO - Updated RSI_Silver_ctn => 10022.39
2025-02-05 15:35:57,234:INFO - Updated Gold => 1908.43
2025-02-05 15:35:57,635:INFO - Updated Silver => 30.26
2025-02-05 15:35:58,862:INFO - Updated RSI_Gold_mtm => 10013.31
2025-02-05 15:35:59,516:INFO - Updated RSI_Gold_ctn => 10013.31
2025-02-05 15:35:59,702:INFO - Updated RSI_Silver_mtm => 10026.17
2025-02-05 15:36:00,105:INFO - Updated RSI_Silver_ctn => 10026.17
2025-02-05 15:36:01,734:INFO - Updated Gold => 1910.04
2025-02-05 15:36:02,542:INFO - Updated Silver => 30.20
2025-02-05 15:36:03,003:INFO - Updated RSI_Gold_mtm => 10015.86
2025-02-05 15:36:03,227:INFO - Updated RSI_Gold_ctn => 10015.86
2025-02-05 15:36:03,408:INFO - Updated RSI_Silver_mtm => 10020.01
2025-02-05 15:36:03,606:INFO - Updated RSI_Silver_ctn => 10020.01
2025-02-05 15:36:03,608:INFO - Client disconnected. Total clients: 0
2025-02-05 15:36:03,608:INFO - connection closed
2025-02-05 15:36:03,609:INFO - connection open
2025-02-05 15:36:03,609:INFO - Client connected. Total clients: 1
2025-02-05 15:36:03,609:INFO - Sent initial price snapshot to client
2025-02-05 15:36:03,609:INFO - Sent initial positions snapshot to client
2025-02-05 15:36:05,319:INFO - Updated Gold => 1910.59
2025-02-05 15:36:07,182:INFO - Updated Silver => 30.26
2025-02-05 15:36:07,521:INFO - Updated RSI_Gold_mtm => 10016.71
2025-02-05 15:36:08,023:INFO - Updated RSI_Gold_ctn => 10016.71
2025-02-05 15:36:08,316:INFO - Updated RSI_Silver_mtm => 10025.76
2025-02-05 15:36:08,648:INFO - Updated RSI_Silver_ctn => 10025.76
2025-02-05 15:36:09,846:INFO - Updated Gold => 1908.81
2025-02-05 15:36:10,278:INFO - Updated Silver => 30.23
2025-02-05 15:36:10,633:INFO - Updated RSI_Gold_mtm => 10013.91
2025-02-05 15:36:11,105:INFO - Updated RSI_Gold_ctn => 10013.91
2025-02-05 15:36:11,865:INFO - Updated RSI_Silver_mtm => 10022.57
2025-02-05 15:36:12,040:INFO - Updated RSI_Silver_ctn => 10022.57
2025-02-05 15:36:13,528:INFO - Updated Gold => 1909.37
2025-02-05 15:36:13,723:INFO - Updated Silver => 30.25
2025-02-05 15:36:13,935:INFO - Updated RSI_Gold_mtm => 10014.80
2025-02-05 15:36:14,276:INFO - Updated RSI_Gold_ctn => 10014.80
2025-02-05 15:36:14,475:INFO - Updated RSI_Silver_mtm => 10024.87
2025-02-05 15:36:14,647:INFO - Updated RSI_Silver_ctn => 10024.87
2025-02-05 15:36:15,826:INFO - Updated Gold => 1907.55
2025-02-05 15:36:16,181:INFO - Updated Silver => 30.22
2025-02-05 15:36:16,772:INFO - Updated RSI_Gold_mtm => 10011.92
2025-02-05 15:36:16,974:INFO - Updated RSI_Gold_ctn => 10011.92
2025-02-05 15:36:17,195:INFO - Updated RSI_Silver_mtm => 10022.25
2025-02-05 15:36:17,377:INFO - Updated RSI_Silver_ctn => 10022.25
2025-02-05 15:36:18,598:INFO - Updated Gold => 1906.39
2025-02-05 15:36:19,163:INFO - Updated Silver => 30.19
2025-02-05 15:36:19,683:INFO - Updated RSI_Gold_mtm => 10010.08
2025-02-05 15:36:20,743:INFO - Updated RSI_Gold_ctn => 10010.08
2025-02-05 15:36:21,076:INFO - Updated RSI_Silver_mtm => 10019.42
2025-02-05 15:36:21,077:INFO - Removed dead client. Total clients: 0
2025-02-05 15:36:21,751:INFO - Updated RSI_Silver_ctn => 10019.42
2025-02-05 15:36:21,752:ERROR - connection handler failed
Traceback (most recent call last):
  File "/opt/anaconda3/lib/python3.12/site-packages/websockets/legacy/server.py", line 236, in handler
    await self.ws_handler(self)
  File "/Users/matthewchan/Documents/Repos/risk-monitoring-project/feed-engine.py", line 230, in register_client
    connected_clients.remove(websocket)
KeyError: <websockets.legacy.server.WebSocketServerProtocol object at 0x1059cd9d0>
2025-02-05 15:36:21,753:INFO - connection closed
2025-02-05 15:36:21,754:INFO - connection open
2025-02-05 15:36:21,754:INFO - Client connected. Total clients: 1
2025-02-05 15:36:21,754:INFO - Sent initial price snapshot to client
2025-02-05 15:36:21,754:INFO - Sent initial positions snapshot to client
2025-02-05 15:36:23,135:INFO - Updated Gold => 1908.10
2025-02-05 15:36:23,369:INFO - Updated Silver => 30.13
2025-02-05 15:36:23,547:INFO - Updated RSI_Gold_mtm => 10012.78
2025-02-05 15:36:23,760:INFO - Updated RSI_Gold_ctn => 10012.78
2025-02-05 15:36:24,002:INFO - Updated RSI_Silver_mtm => 10013.38
2025-02-05 15:36:24,186:INFO - Updated RSI_Silver_ctn => 10013.38
2025-02-05 15:36:25,371:INFO - Updated Gold => 1906.93
2025-02-05 15:36:25,547:INFO - Updated Silver => 30.20
2025-02-05 15:36:25,755:INFO - Updated RSI_Gold_mtm => 10010.95
2025-02-05 15:36:25,944:INFO - Updated RSI_Gold_ctn => 10010.95
2025-02-05 15:36:26,155:INFO - Updated RSI_Silver_mtm => 10019.60
2025-02-05 15:36:26,427:INFO - Updated RSI_Silver_ctn => 10019.60
2025-02-05 15:36:27,624:INFO - Updated Gold => 1905.57
2025-02-05 15:36:27,819:INFO - Updated Silver => 30.20
2025-02-05 15:36:28,002:INFO - Updated RSI_Gold_mtm => 10008.79
2025-02-05 15:36:28,193:INFO - Updated RSI_Gold_ctn => 10008.79
2025-02-05 15:36:28,545:INFO - Updated RSI_Silver_mtm => 10019.66
2025-02-05 15:36:28,805:INFO - Updated RSI_Silver_ctn => 10019.66
2025-02-05 15:36:29,989:INFO - Updated Gold => 1905.41
2025-02-05 15:36:30,199:INFO - Updated Silver => 30.24
2025-02-05 15:36:30,398:INFO - Updated RSI_Gold_mtm => 10008.54
